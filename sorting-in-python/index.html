
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>
Python中的排序总结 | SuKai
</title>
  <link rel="stylesheet" href="http://cdn.amazeui.org/amazeui/2.7.0/css/amazeui.min.css">
  <link rel="stylesheet" href="http://127.0.0.1:8888/static/css/style.css?v=97f6f71bdb7a6e1122c89b4c5b5136b6" type="text/css" />
  <!-- <link rel="stylesheet" href="http://127.0.0.1:8888/static/css/pygments_style.css?v=f52807bdba7d67ebabc3ce287f67bf67" type="text/css" /> -->
</head>

<body>
  <div class="wrapper">
    <!-- header-->
    <header class="header-wrapper">
      <div class="header-container">
        <nav>
          <ul class="header-nav">
            <li><a href="http://sukai.me/"><span class="am-icon-sm am-icon-home" id="nav-icon"></span>Home</a></li>
            <li><a href="http://sukai.me/Board/"><span class="am-icon-sm am-icon-heart" id="nav-icon"></span>Board</a></li>
            <li><a href="http://sukai.me/MyHistory/"><span class="am-icon-sm am-icon-history" id="nav-icon"></span>TimeLine</a></li>
            <li><a href="http://sukai.me/AboutMe/"><span class="am-icon-sm am-icon-user-secret" id="nav-icon"></span>About</a></li>
            <li><a href="http://sukai.me/friend/"><span class="am-icon-sm am-icon-link" id="nav-icon"></span>Links</a></li>
            <li><a href="http://127.0.0.1:8888/archive/index.html"><span class="am-icon-sm am-icon-archive" id="nav-icon"></span>Archives</a></li>
            <li><a href="http://sukai.me/wiki/"><span class="am-icon-sm am-icon-wikipedia-w" id="nav-icon"></span>Wiki</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <!-- header -->

    <!-- conetent -->
    <div class="content-wrapper">
      <div class="am-g am-g-fixed blog-g-fixed">
        <div class="am-u-md-9">
        
<article class="post-main" id="post-font">
  <header class="blog-header">
    <span class="round-date">
      <span class="month">04月</span>
      <span class="day">19</span>
    </span>
    <p class="blog-title">Python中的排序总结</p>
    <p class="blog-meta">
      <i class="am-icon-heart-o"></i> Published at Apr 19, 2016 • 
      <!--<i class="am-icon-binoculars"></i> 87 次围观 • -->
      <!--<i class="am-icon-bookmark"></i> 0条评论-->
      <i class="am-icon-tags"></i>
      
        <a class="am-badge am-radius blog-tag" href="http://127.0.0.1:8888/tag/Python/">Python</a>
      
    </p>

  </header>
  <section class="blog-content">
    <p>笔者阅读外文博客，整理了Python中List, Tuple, Dictionary三类常见数据结构的相关排序的tips  </p>

<h3>一. 对List（或Tuple）进行排序</h3>

<h4>1.1 最简单的List排序</h4>

<p>假设我们有一组数字列表：<code>a = [3,6,8,2,78,1,23,45,9]</code>  </p>

<p>我们可以通过<code>sort</code>方法和<code>sorted</code>方法对a进行排序。两者的区别在于：<code>sort</code>是list自带的方法，它会将原先的list直接修改为排序完成后的list；<code>sorted</code>方法不会修改原先的list，而是返回一个新的排序后的list  </p>

<pre><code>&gt;&gt;&gt; sorted(a)  
[1, 2, 3, 6, 8, 9, 23, 45, 78]  
&gt;&gt;&gt;  
&gt;&gt;&gt; a.sort()  
&gt;&gt;&gt; a  
[1, 2, 3, 6, 8, 9, 23, 45, 78]</code></pre>

<p>如果要求逆序，可以：  </p>

<pre><code>&gt;&gt;&gt; sorted(a, reverse=True)  
&gt;&gt;&gt;  
&gt;&gt;&gt; a.sort(reverse=True)</code></pre>

<p><code>sort</code>和<code>sorted</code>执行时都会调用每个对象的<code>__cmp__</code>方法，该方法用于比较相关值，以便决定排序的结果  </p>

<h4>1.2 最简单的Tuple排序</h4>

<p>tuple排序和list类似，只不过python的tuple是不可变对象，所以只能用<code>sorted</code>了  </p>

<pre><code>&gt;&gt;&gt; tup = (3, 6, 8, 2, 78, 1, 23, 45, 9)  
&gt;&gt;&gt; sorted(tup)  
[1, 2, 3, 6, 8, 9, 23, 45, 78]</code></pre>

<h4>1.3 对一组列表或者元组进行排序</h4>

<p>首先我们需要确定：依据每个元素（该元素是list或者tuple）中的第几个元素进行排序呢？  </p>

<p>只需要给<code>sorted</code>或者<code>sort</code>传入key参数指定排序依据的key即可  </p>

<pre><code>&gt;&gt;&gt; def getKey(item):  
...     return item[0]  
&gt;&gt;&gt; l = [[2, 3], [6, 7], [3, 34], [24, 64], [1, 43]]  
&gt;&gt;&gt; sorted(l, key=getKey)  
[[1, 43], [2, 3], [3, 34], [6, 7], [24, 64]]</code></pre>

<p>同样的，依据第二个元素排序  </p>

<pre><code>def getKey(item):  
    return item[1]</code></pre>

<p>一组tuple的排序同上  </p>

<pre><code>&gt;&gt;&gt; a = [(2, 3), (6, 7), (3, 34), (24, 64), (1, 43)]  
&gt;&gt;&gt; sorted(l, key=getKey)  
[(1, 43), (2, 3), (3, 34), (6, 7), (24, 64)]</code></pre>

<h4>1.4 对一组自定义对象进行排序</h4>

<pre><code>class Custom(object):  
    def __init__(self, name, number):  
        self.name = name  
        self.number = number  

    def __repr__(self):  
        return &#39;{}: {} {}&#39;.format(self.__class__.__name__,  
                                  self.name,  
                                  self.number)  

customlist = [  
    Custom(&#39;object&#39;, 99),  
    Custom(&#39;michael&#39;, 1),  
    Custom(&#39;theodore the great&#39;, 59),  
    Custom(&#39;life&#39;, 42)  
]</code></pre>

<p>依据number对customlist进行排序  </p>

<pre><code>def getKey(custom):  
    return custom.number  

&gt;&gt;&gt; sorted(customlist, key=getKey)  
[Custom: michael 1, Custom: life 42,  
Custom: theodore the great 59, Custom: object 99]</code></pre>

<p>我们也可以不使用key参数，使用<code>__cmp__</code>  </p>

<pre><code>class Custom(object):  
    def __init__(self, name, number):  
        self.name = name  
        self.number = number  

    def __repr__(self):  
        return &#39;{}: {} {}&#39;.format(self.__class__.__name__,  
                                  self.name,  
                                  self.number)  

    def __cmp__(self, other):  
        if hasattr(other, &#39;number&#39;):  
            return self.number.__cmp__(other.number)</code></pre>

<pre><code>&gt;&gt;&gt; sorted(customlist)  
[Custom: michael 1, Custom: life 42, Custom: theodore the great 59, Custom: object 99]</code></pre>

<h4>1.5 对一组由不同对象组成的list进行排序</h4>

<pre><code>class AnotherObject(object):  
    def __init__(self, tag, age, rate):  
        self.tag = tag  
        self.age = age  
        self.rate = rate  

    def __repr__(self):  
        return &#39;{}: {} {} {}&#39;.format(self.__class__.__name__,  
                                     self.tag,  
                                     self.age, self.rate)  

    def __cmp__(self, other):  
        if hasattr(other, &#39;age&#39;):  
            return self.age.__cmp__(other.age)</code></pre>

<pre><code>customlist = [  
    Custom(&#39;object&#39;, 99),  
    Custom(&#39;michael&#39;, 1),  
    Custom(&#39;theodore the great&#39;, 59),  
    Custom(&#39;life&#39;, 42),  
    AnotherObject(&#39;bananas&#39;, 37, 2.2),  
    AnotherObject(&#39;pants&#39;, 73, 5.6),  
    AnotherObject(&#39;lemur&#39;, 44, 9.2)  
]</code></pre>

<pre><code>&gt;&gt;&gt; sorted(customlist)  
Traceback (most recent call last):  
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;  
TypeError: an integer is required</code></pre>

<p>这时候我们会得到一个错误。因为Custom并没有age属性，AnotherObject并没有number属性。我们只需要重新定义我们的两个类即可  </p>

<pre><code>class Custom(object):  
    def __init__(self,name,number):  
        self.name = name  
        self.number = number  

    def __repr__(self):  
        return &#39;{}: {} {}&#39;.format(self.__class__.__name__,  
                                  self.name,  
                                  self.number)  

    def __cmp__(self, other):  
        if hasattr(other, &#39;getKey&#39;):  
            return self.getKey().__cmp__(other.getKey())  

    def getKey(self):  
        return self.number  


class AnotherObject(object):  
    def __init__(self, tag, age, rate):  
        self.tag = tag  
        self.age = age  
        self.rate = rate  

    def __repr__(self):  
        return &#39;{}: {} {} {}&#39;.format(self.__class__.__name__,  
                                     self.tag,  
                                     self.age, self.rate)  

    def __cmp__(self, other):  
        if hasattr(other, &#39;getKey&#39;):  
            return self.getKey().__cmp__(other.getKey())  

    def getKey(self):  
        return self.age</code></pre>

<pre><code>&gt;&gt;&gt; sorted(customlist)  
[Custom: michael 1, AnotherObject: bananas 37 2.2,  
Custom: life 42, AnotherObject: lemur 44 9.2,  
Custom: theodore the great 59, AnotherObject: pants 73 5.6,  
Custom: object 99]</code></pre>

<p>我们也可以使用key参数完成  </p>

<pre><code>def getKey(customobj):  
    return customobj.getKey()</code></pre>

<pre><code>&gt;&gt;&gt; sorted(customlist, key=getKey)  
[Custom: michael 1, AnotherObject: bananas 37 2.2,  
Custom: life 42, AnotherObject: lemur 44 9.2,  
Custom: theodore the great 59, AnotherObject: pants 73 5.6,  
Custom: object 99]</code></pre>

<h3>二. 对Dictionary进行排序</h3>

<p>需要注意的是：我们无法对一个dict进行真正的排序，因为dict是内置无序的，我们所说的排序是返回一个排序完成后的表示，本质是一个list或者一组tuple等等  </p>

<p>假设我们有dict如下：<code>numbers = {&#39;first&#39;: 1, &#39;second&#39;: 2, &#39;third&#39;: 3, &#39;Fourth&#39;: 4}  
</code>  </p>

<h4>2.1 根据keys对dict进行排序</h4>

<p>如果我们需要根据dict的keys进行排序，最简单的方式就是使用内建方法<code>sorted</code>（dict没有sort方法），它会返回一组排序好的keys list。  </p>

<pre><code>&gt;&gt;&gt; sorted(numbers)  
[&#39;fourth&#39;, &#39;first&#39;, &#39;second&#39;, &#39;third&#39;]</code></pre>

<h4>2.2 根据values对dict进行排序</h4>

<p>依然可以使用<code>sorted</code>解决  </p>

<pre><code>&gt;&gt;&gt; sorted(numbers.value())  
[1,2,3,4]</code></pre>

<h4>2.3 自定义dict排序：通过keys（values）来对values（keys）排序，并只返回values（keys）</h4>

<p>通过values对keys排序  </p>

<pre><code># Use the __getitem__ method as the key function  
&gt;&gt;&gt; sorted(numbers, key=numbers.__getitem__)  
# In order of sorted values: [1, 2, 3, 4]  
[&#39;first&#39;, &#39;second&#39;, &#39;third&#39;, &#39;Fourth&#39;]</code></pre>

<p>通过keys来对values排序  </p>

<pre><code># Uses the first element of each tuple to compare  
&gt;&gt;&gt; [value for (key, value) in sorted(numbers.items())]  
[4, 1, 2, 3]  
# In order of sorted keys: [&#39;Fourth&#39;, &#39;first&#39;, &#39;second&#39;, &#39;third&#39;]</code></pre>

<p>逆序  </p>

<pre><code>&gt;&gt;&gt; sorted(numbers, key=numbers.__getitem__, reverse=True)  
[&#39;Fourth&#39;, &#39;third&#39;, &#39;second&#39;, &#39;first&#39;]  
&gt;&gt;&gt; [value for (key, value) in sorted(numbers.items(), reverse=True)]  
[3, 2, 1, 4]</code></pre>

<h4>2.4</h4>

<pre><code># Won&#39;t change the items to be returned, only while sorting  
&gt;&gt;&gt; sorted(numbers, key=str.lower)  
[&#39;first&#39;, &#39;Fourth&#39;, &#39;second&#39;, &#39;third&#39;]</code></pre>

<pre><code>&gt;&gt;&gt; month = dict(one=&#39;January&#39;,  
                 two=&#39;February&#39;,  
                 three=&#39;March&#39;,  
                 four=&#39;April&#39;,  
                 five=&#39;May&#39;)</code></pre>

<pre><code>&gt;&gt;&gt; numbermap = {&#39;one&#39;: 1, &#39;two&#39;: 2, &#39;three&#39;: 3, &#39;four&#39;: 4, &#39;five&#39;: 5}  
&gt;&gt;&gt; sorted(month, key=numbermap.__getitem__)  
[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;]</code></pre>

<p>如果我想根据字符串中重复字母出现的次数进行排序：  </p>

<pre><code>def repeats(string):  
    # Lower the case in the string  
    string = string.lower()  

    # Get a set of the unique letters  
    uniques = set(string)  

    # Count the max occurrences of each unique letter  
    counts = [string.count(letter) for letter in uniques]  
    return max(counts)</code></pre>

<pre><code># From greatest to least repeats  
&gt;&gt;&gt; sorted(month.values(), key=repeats, reverse=True)  
[&#39;February&#39;, &#39;January&#39;, &#39;March&#39;, &#39;April&#39;, &#39;May&#39;]</code></pre>

<h4>2.5 一些更高级的排序功能</h4>

<pre><code>trans = dict(January=33, February=30, March=24, April=0, May=7)</code></pre>

<p>对value提出某种特定要求的排序：偶数比奇数优先  </p>

<pre><code>def evens1st(num):  
    # Test with modulus (%) two  
    if num == 0:  
        return -2  
    # It&#39;s an even number, return the value  
    elif num % 2 == 0:  
        return num  
    # It&#39;s odd, return the negated inverse  
    else:  
        return -1 * (num ** -1)</code></pre>

<pre><code>&gt;&gt;&gt; sorted(trans.values(), key=evens1st, reverse=True)  
[30, 24, 33, 7, 0]</code></pre>

<h4>2.6 根据key和value排序，并返回排序之后的（key, value）组合</h4>

<pre><code>import operator  
x = {1: 2, 3: 4, 4: 3, 2: 1, 0: 0}  
sorted_x = sorted(x.items(), key=operator.itemgetter(1))</code></pre>

<pre><code>import operator  
x = {1: 2, 3: 4, 4: 3, 2: 1, 0: 0}  
sorted_x = sorted(x.items(), key=operator.itemgetter(0)</code></pre>

<hr/>

<p>本文翻译自：  </p>

<ul>
<li><a href="http://pythoncentral.io/how-to-sort-a-list-tuple-or-object-with-sorted-in-python/" target="_blank">pythoncentral-sort-list-tuple</a><br/></li>
<li><a href="http://pythoncentral.io/how-to-sort-python-dictionaries-by-key-or-value/" target="_blank">pythoncental-sort-dictionary</a></li>
</ul>

  </section>
  
    
        
            <div id="disqus_thread"></div>
            <script type="text/javascript">
				var disqus_title = "";
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://sukaime.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        
        
    

</article>

        </div>

        <div class="sidebar">
          <div class="am-u-md-3">
            <!-- about me -->
            <div class="panel about-me">
              <div class="about-me-bg"></div>
              <div class="about-me-content">
                <a href="http://sukai.me"><img class="avatar" src="http://7xl2fd.com1.z0.glb.clouddn.com/12.png"></img></a>
                <h5 class="about-me-name"><a href="http://sukai.me/AboutMe/">KaiSu</a></h5>
                <p class="about-me-words">A Programmer. I code in Python, Java.</p>
                <ul class="about-me-ul">
                  <li class="about-me-li">
                    <a class="about-me-li-content" href="http://127.0.0.1:8888/archive/index.html">
                      Articles
                      <h5 class="about-me-li-h5">37</h5>
                    </a>
                  </li>
                  <li class="about-me-li">
                    <a class="about-me-li-content" href="http://127.0.0.1:8888/tag/index.html">
                      Tags
                      <h5 class="about-me-li-h5">36</h5>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <!-- about me -->
            
            <!-- contact-me -->
            <div class="contact-me panel-two">
              <h3 class="panel-title">Follow Me</h5>
              <div class="contact-me-icons">
                <a href="https://github.com/su-kaiyao" title="github" target="_blank"><i class="am-icon-github am-icon-md"></i></a>
                <a href="http://weibo.com/2902370675/profile?topnav=1&wvr=6" title="weibo" target="_blank"><i class="am-icon-weibo am-icon-md"></i></a>
                <a href="https://twitter.com/SuKai_Coding" title="twitter" target="_blank"><i class="am-icon-twitter am-icon-md"></i></a>
                <!-- <a id="weixin-icon">
                  <i class="am-icon-weixin am-icon-md"></i>
                  <div id="weixin-info">
                    <br/>
                    <p>扫扫二维码，多交一枚盆友~</p>
                    <img src="http://7xl2fd.com1.z0.glb.clouddn.com/weixin-qrcode.png">
                  </div>
                </a> -->
              </div>
            </div>
            <!-- contact-me-->
            <!-- email-me -->
            <div class="panel-two">
              <h3 class="panel-title">Contact Me</h5>
              <img src="http://7xl2fd.com1.z0.glb.clouddn.com/sukai.email.gif">
            </div>
            <!-- email-me-->
            <!-- recently -->
            <div class="shuoshuo panel-two">
              <h5 class="panel-title">Tweeting</h5>
              <div class="shuoshuo-content">
                Just keep practicing.
              </div>
              <div class="shuoshuo-content">
                出来混迟早是要还的.
              </div>
            </div>
            <!-- recently -->
            <!-- waiting-->
            <!-- <div class="contact-me panel-two">
              <h3 class="panel-title">Member Of <a target="_blank" href="http://palm.seu.edu.cn/home.html">seu palm</a></h5>
              <span>
                <img id="palm-logo" src="http://7xl2fd.com1.z0.glb.clouddn.com/palm_seu.png">
              </span>
            </div> -->
            
            <!-- Linux Cn -->
            <div class="contact-me panel-two">
              <h3 class="panel-title">Member Of <a target="_blank" href="https://github.com/LCTT">LCTT</a></h5>
              <span>
                <img id="lctt-logo" src="http://7xl2fd.com1.z0.glb.clouddn.com/LCTT.png">
                <a href="http://sukai.me/MyTrans/">Click For More...</a>
              </span>
            </div>
            <!-- Linux Cn -->
            <!--friends -->
            <div class="friends panel-two">
              <h3 class="panel-title">Friends<small><a href="http://sukai.me/friend/">.More</a></small></h5>
              <ul class="friends-ul">
                <li>
                  <a href="http://www.findspace.name/" title="Findspace" target="_blank">Findspace</a>
                </li>
                <li>
                  <a href="http://www.fddcn.cn/" title="奋斗的承诺" target="_blank">奋斗的承诺</a>
                </li>
                <li>
                  <a href="https://www.anotherhome.net/" title="DIYgod" target="_blank">DIYgod</a>
                </li>
                <li>
                  <a href="http://www.llwjy.com/" title="小鸡慢慢" target="_blank">小鸡慢慢</a>
                </li>
                <li>
                  <a href="http://ming.today/" title="Ming YIN" target="_blank">Ming YIN</a>
                </li>
                <li>
                  <a href="http://fuchen.me/" title="ShiFuChen" target="_blank">ShiFuChen</a>
                </li>
                <li>
                  <a href="https://xitu.io/" title="稀土" target="_blank">稀土</a>
                </li>
                <li>
                  <a href="http://stomach-ache.github.io/" title="Wei Tong" target="_blank">Wei Tong</a>
                </li>
                <li>
                  <a href="http://kirosummer.github.io/" title="Kiro's Blog" target="_blank">Kiro's Blog</a>
                </li>
                <li>
                  <a href="http://www.devchen.com/" title="十七的空指针" target="_blank">十七的空指针</a>
                </li>
                <li>
                  <a href="http://xuweitao.me/" title="肉包子打狗" target="_blank">肉包子打狗</a>
                </li>
                <li>
                  <a href="http://mikecoder.net/" title="MikeCoder's Blog" target="_blank">MikeCoder</a>
                </li>
                <li>
                  <a href="http://iat.net.cn/" title="iat's Blog" target="_blank">iat's Blog</a>
                </li>
                <li>
                  <a href="http://zinnotes.com/" title="John's Blog" target="_blank">John's Blog</a>
                </li>
                <li>
                  <a href="http://www.renhuanhuan.com/" title="RenHuanHuan's Blog" target="_blank">RenHuanHuan</a>
                </li>
                <li>
                  <a href="http://wanghuanming.com/" title="HuanMing's Blog" target="_blank">HuanMing</a>
                </li>
                <li>
                  <a href="http://maywanting.wang/" title="May's Blog" target="_blank">May's Blog</a>
                </li>
                <li>
                  <a href="http://very9s.net/" title="麻瓜" target="_blank">麻瓜</a>
                </li>
              </ul>
            </div>
            <!--friends -->
            <!-- copyright -->
            <div class="about-copyright panel-two">
              ©Powered by<a href="https://github.com/whtsky/Catsup"> Catsup</a>. Designed by<a href="https://github.com/su-kaiyao/catsup-theme-final"> KaiSu</a>
              <br>
              <img src="http://7xl2fd.com1.z0.glb.clouddn.com/google_analysis.svg" height="15" width="15"/><a href="https://analytics.google.com/" target="_blank"> Google Analysis</a>
            </div>
            <!-- Linux Cn -->
          </div>
        </div>
      </div>
    </div>
    <!-- conetent -->
  </div>

<!--<script src="blog_files/amazeui.js"></script>
<script src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
-->

<!-- <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1257389203'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1257389203' type='text/javascript'%3E%3C/script%3E"));</script> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70406244-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>